<!--  
 doc, with mini online playground using swagger.js client
 see http://developers-blog.helloreverb.com/the-fastest-way-to-connect-to-an-api-with-javascript/
 -->

<span style="font-weight:bold; font-size:120%; color:red;">
THIS PLAYGROUND DOESN'T WORK WELL ON CHROME, USE FIREFOX INSTEAD
(<a href="https://github.com/ozwillo/ozwillo/issues/107">#107</a>)</span>
<br/>
<br/>

Allows to manage (CRUD) and find Data Resources and their Models using JSON/HTTP REST calls.
<br/><br/>
&nbsp;&nbsp;- <b>Data Resources</b> are handled in <a href="http://json-ld.org/">JSON-LD</a>-like 
(with an implicit context) format (see also <a href="http://json-ld.org/playground/index.html">
its playground</a>) and with <b>W3C LDP</b> (Linked Data Platform, see 
<a href="https://dvcs.w3.org/hg/ldpwg/raw-file/tip/ldp-primer/ldp-primer.html">primer</a> and 
<a href="http://www.w3.org/2012/ldp/wiki/Main_Page">wiki</a>)-like operations (URIs, 
future collection filtering (<a href="http://www.w3.org/2012/ldp/wiki/LDPNext">1</a>, 
<a href="http://lists.w3.org/Archives/Public/public-ldp-wg/2012Dec/0030.html">2</a>)
-inspired finders etc.). <b>Have a look at existing Resources, at</b> 
<a href="/dc/type/pli:city_0" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">/dc/type/pli:city_0</a> for instance for resources in the 
<span class="dcjsonline">
pli:city_0</span> Model type (meaning version 0 of the pli:city Model). 
In addition to the simpler default native pure JSON format, "true" JSON-LD formats and semantic web formats (such as 
<a href="http://en.wikipedia.org/wiki/Resource_Description_Framework">RDF</a>, see 
<a href="/dc/type/pli:city_0" class="dclink" onclick="
javascript:return findDataByTypeRdf($(this).attr('href'));
">example</a>) are available. 
<br/><br/>
&nbsp;&nbsp;- <b>Data Models</b> describe what kinds of Data Resources are allowed, in a 
<a href="http://json-schema.org/">JSON Schema</a>-like structure (see 
<a href="http://jsonschema.net/">jsonschema.net playground</a>) with 
<span class="dcjsonline">
string, boolean, int, float, long, double, date, map, list, i18n, resource
</span> fields grouped in reusable <b>Mixin</b> types. 
<b>Have a look at known Models at</b> <a href="/dc/type/dcmo:model_0" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">/dc/type/dcmo:model_0</a> and Mixins at <a href="/dc/type/dcmi:mixin_0" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">/dc/type/dcmi:mixin_0</a>, 
in their own metamodel <a href="#exploreMetamodel">where they may be introspected (see how)</a>,
but also drafted and published (<b>upcoming</b>).
<br/><br/>
<a href="https://github.com/ozwillo/ozwillo-datacore/wiki">See wiki</a> for further 
examples, FAQ, how to &amp; common use cases, cookbook (writing clients...) and full documentation.
<p>
<div class="dc-import-subtitle">Datacore (<span class="dcConf_baseUrl json dcjsonline">NOT INITED</span>) :</div>
<span class="json dcjsonline"><input type="text" id="myurl" class="myurl json dcjsonline" style="padding: 0; width: 552px" value="/dc/type/dcmo:model_0"></span>
<button onclick="javascript:return findData(encodeUri($('.myurl').val()));">GET</button>
<button onclick="javascript:return findData(encodeUri($('.myurl').val()), null, null, null, 50, {'X-Datacore-View':'-'});" title="List view (view : empty i.e. minimal : @id, o:version)">l</button>
<button onclick="javascript:return findData(encodeUri($('.myurl').val()), null, null, null, 25, {'X-Datacore-View':'dc:DubclinCore_0'});" title="List view (view : dc:DubclinCore_0)">dc</button>
<button onclick="javascript:return findData(encodeUri($('.myurl').val()), null, null, null, null, {'X-Datacore-Debug':'true'});" title="Debug / explain query">?</button>
<button onclick="javascript:return findData(encodeUri($('.myurl').val()), null, null, null, null, {'Accept':'text/x-nquads'});" title="RDF N-Quads output">RDF</button>
<button onclick="javascript:return editOrPostData(encodeUri($('.myurl').val()));" id="editOrPost" title="edit data, then post changes">edit</button>
<button onclick="javascript:return deleteResources(encodeUri($('.myurl').val()));" title="delete">X</button>
<button onclick="javascript:return findModel(encodeUri($('.myurl').val()));" title="go to its model">M</button>
<button onclick="javascript:return getPreviousData(encodeUri($('.myurl').val()));" title="previous version in history if enabled">H</button>
<!-- button onclick="javascript:return setUrl('');" title="Reset URL">X</button><br/ -->
<div class="block response_body">
<a id="mydata"></a><!-- displays a short error message in red -->
<pre id="mynoteditabledata" class="json dcjsonarea"><code id="mydata" class="mydata"></code></pre>
<textarea id="myeditabledata" style="display: none" class="json dcjsonarea myeditabledata"></textarea>
</div>
</p>
See <a href="#playgroundUserManual">this Playground's user manual below</a> and
<a href="https://github.com/ozwillo/ozwillo-datacore/wiki/Playground-&-Import-UI-demo-scenario---Provto-&-OpenElec">its tutorial on wiki</a>.
<p></p>
<p></p>

<br/>
<a id="#commonQueries"></a>
<b>Most common use cases' queries:</b>
<br/><br/>
<u>NB. if some queries fail, please check <a href="#faq">Frequently AskedQuestions</a> first.</u>
<br/><br/>
&nbsp;&nbsp;- 
<a href="/dc/type/dcmp:Project_0/geo_1" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">geo_1</a>
 - list countries : 
<a href="/dc/type/geohier:Hierarchical_0" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">countries supported by Ozwillo</a> (Portal etc.), or 
<a href="/dc/type/geohier:Hierarchical_0?geoco:name=+" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">also sorted by name</a>. Or for some use cases 
<a href="/dc/type/geoco:Country_0" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">any country</a> (actually first 10 countries ; or  
<a href="/dc/type/geoco:Country_0?limit=100" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">first 100 countries</a> but beware that limit can't go beyond 100,
in which case iteration on ex. id or name should be preferred, <a href="#iterateOnOrganizations">see below for organizations</a>).
<br/><br/>
NB. from now on, all queries are <b>sorted</b> by the most appropriate field. 
<!-- 
<br/><br/>
or more efficiently (getting only their display name with X-Datacore-View=odisp:Displayable_0 header, since no other field is useful to list them) 
<a href="/dc/type/geoco:Country_0" class="dclink" onclick="
javascript:return findData($(this).attr('href'), null, null, null, 25, {'X-Datacore-View':'odisp:Displayable_0'});
">countries</a>,
 -->
<br/><br/>
&nbsp;&nbsp;- 
<a href="/dc/type/dcmp:Project_0/geo_1" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">geo_1</a>
 - choose city by upper hierarchy ex. Paris or Sofia (София) : having chosen country, 
<a href="/dc/type/geon2:Nuts2_0?geo:country=http://data.ozwillo.com/dc/type/geocofr:Pays_0/FR&geo:name=+" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">NUTS2s by country</a> (or 
<a href="/dc/type/geon2fr:R%C3%A9gion_0?geo:name=+" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">country NUTS2s</a>) then
<a href="/dc/type/geon3fr:D%C3%A9partement_0?geon:parent=http://data.ozwillo.com/dc/type/geon2fr:R%C3%A9gion_0/FR/FR-J&geo:name=+" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">NUTS3s by NUTS2</a>, or depending on your country 
<a href="/dc/type/geon3:Nuts3_0?geo:country=http://data.ozwillo.com/dc/type/geocobg:C%D1%82%D1%80%D0%B0%D0%BD%D0%B0_0/BG&geo:name=+" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">NUTS3s by country</a> (or 
<a href="/dc/type/geon3bg:%D0%9E%D0%B1%D0%BB%D0%B0%D1%81%D1%82_0?geo:name=+" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">country NUTS3s</a>), and finally 
<a href="/dc/type/addrpostci:PostalCity_0?addrpostci:nuts3=http://data.ozwillo.com/dc/type/geon3fr:D%C3%A9partement_0/FR/FR-75" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">address cities by NUTS3</a> (
<a href="/dc/type/addrpostci:PostalCity_0?addrpostci:nuts3=http://data.ozwillo.com/dc/type/geon3bg:%D0%9E%D0%B1%D0%BB%D0%B0%D1%81%D1%82_0/BG/BG-22" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">another example</a>
), or for some use cases
<a href="/dc/type/geoci:City_0?geoci:nuts3=http://data.ozwillo.com/dc/type/geon3fr:D%C3%A9partement_0/FR/FR-75&geo:name=+" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">geographical cities by NUTS3</a> 
(or 
<a href="/dc/type/geocibg:%D0%9D%D0%B0%D1%81%D0%B5%D0%BB%D0%B5%D0%BD%D0%BEM%D0%B5%D1%81%D1%82%D0%BE_0?geoci:nuts3:http://data.ozwillo.com/dc/type/geon3bg:%D0%9E%D0%B1%D0%BB%D0%B0%D1%81%D1%82_0/BG/BG-22&geo:name=+" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">country geographical cities by NUTS3</a>).
<br/><br/>
&nbsp;&nbsp;- 
<a href="/dc/type/dcmp:Project_0/geo_1" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">geo_1</a>
 - choose city using autocompletion field: 
<a href="/dc/type/addrpostci:PostalCity_0?geo:name=$fulltextparis+&geo:country=http://data.ozwillo.com/dc/type/geocofr:Pays_0/FR" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">address city by fulltext name and country</a> (
<a href="/dc/type/addrpostci:PostalCity_0?geo:name=$fulltextСофия+&geo:country=http://data.ozwillo.com/dc/type/geocobg:C%D1%82%D1%80%D0%B0%D0%BD%D0%B0_0/BG" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">another example</a> ; however it has been disabled on 
<a href="/dc/type/addrpostci:PostalCity_0?odisp:name=$fulltextparis+&geo:country=http://data.ozwillo.com/dc/type/geocofr:Pays_0/FR" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">generic display name</a>
to avoid finding its cities when looking for a province), or for some use cases
<a href="/dc/type/geoci:City_0?geoci:name=$fulltextparis+&geo:country=http://data.ozwillo.com/dc/type/geocofr:Pays_0/FR" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">geographical city by fulltext name and country</a>.
<br/><br/>
<!--
&nbsp;&nbsp;- 
<a href="/dc/type/dcmp:Project_0/geo_1" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">geo_1</a>
 - get a city group's cities: 
<a href="/dc/type/geoci:City_0?geoci:cityGroup=http://data.ozwillo.com/dc/type/geocigrfr:Agglom%C3%A9ration_0/FR/CC%20des%20Trois%20Pays" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">geographical cities by city group</a> (
<a href="/dc/type/geoci:City_0?geoci:cityGroup=http://data.ozwillo.com/dc/type/geocigrbg:%D0%9E%D0%B1%D1%89%D0%B8%D0%BD%D0%B0_0/BG/%D0%A1%D1%82%D0%BE%D0%BB%D0%B8%D1%87%D0%BD%D0%B0" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">another example</a>. BEWARE though, it's not indexed yet (so it may not return all results 
and performances are bad), and this does not work for all postal cities but logically only 
geographical cities (so Turkish districts are out). 
<br/><br/>
--> 
&nbsp;&nbsp;-
<a href="/dc/type/dcmp:Project_0/org_1" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">org_1</a>
 - choose org using autocompletion input : 
<a href="/dc/type/org:Organization_0?org:legalName=$fulltextbonnard+&org:country=http://data.ozwillo.com/dc/type/geocofr:Pays_0/FR" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">orgs by fulltext name in country</a> then 
<a href="/dc/type/org:Organization_0?org:altName=$fulltextbonnard+&org:country=http://data.ozwillo.com/dc/type/geocofr:Pays_0/FR" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">also by altName in country</a> (must be done in separate requests), or 
<a href="/dc/type/orgfr:Organisation_0?org:legalName=$fulltextbonnard+" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">country org by fulltext name</a> then 
<a href="/dc/type/orgfr:Organisation_0?org:altName=$fulltextbonnard+" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">also by altName</a>
(however it has been disabled on 
<a href="/dc/type/org:Organization_0?odisp:name=$fulltextbonnard+&org:country=http://data.ozwillo.com/dc/type/geocofr:Pays_0/FR" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">generic display name</a>)
<br/><br/>
&nbsp;&nbsp;- 
<a href="/dc/type/dcmp:Project_0/org_1" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">org_1</a>
 - choose business activity using autocompletion input : 
<a href="/dc/type/orgact:Activity_0?orgact:label=$fulltextaquacult+&orgact:country=http://data.ozwillo.com/dc/type/geocofr:Pays_0/FR" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">activity by fulltext name and country</a>
 or 
<a href="/dc/type/orgactfr:Activit%C3%A9NAF2008_0?orgact:label=$fulltextaquacult+" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">country activity by fulltext name</a>
<br/><br/>
<a id="iterateOnOrganizations"></a>
&nbsp;&nbsp;- 
<a href="/dc/type/dcmp:Project_0/org_1" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">org_1</a>
 - downloading all business activities to cache them by iterating on @id 
(easier than on orgact:code which would need to do &gt;= and merge same-code activities 
of different countries, rather than merely &gt;) : 
<a href="/dc/type/orgact:Activity_0?limit=100&@id=+" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">first query</a>, 
then iterate on activities coming after last name returned : 
<a href="/dc/type/orgact:Activity_0?limit=100&@id=>http://data.ozwillo.com/dc/type/orgactbg:%D0%94%D0%B5%D0%B9%D0%BD%D0%BE%D1%81%D1%82%D0%9A%D0%98%D0%94_0/BG/14.13+" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">second query</a>, 
<a href="/dc/type/orgact:Activity_0?limit=100&@id=>http://data.ozwillo.com/dc/type/orgactbg:%D0%94%D0%B5%D0%B9%D0%BD%D0%BE%D1%81%D1%82%D0%9A%D0%98%D0%94_0/BG/25.61+" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">third query</a>...
<br/><br/>

<br/>
<a id="faq"></a>
<b>FAQ:</b>
<br/><br/>
&nbsp;&nbsp;- <u>"reached maxScan (300) before document limit"</u> errors (or no return) 
on ex. "by geo area" queries : ask model designer to 
<a href="https://github.com/pole-numerique/oasis-datacore/wiki/Playground-&-Import-UI-demo-scenario---Provto-&-OpenElec">add the right indexes</a>  
(and first to check that said field has values). <u>Workaround</u> : query in country-specific types.
<br/><br/>
&nbsp;&nbsp;- <u>"operation exceeded time limit"</u> errors 
on ex. geoname "by geoname:id" queries : same as above, ask model designer to add the right indexes 
(and first to check that said field has values). <u>Workaround</u> : use the URI (@id field) as ID.
<br/><br/>
&nbsp;&nbsp;- <u>"Attempting a fulltext search on a field that is not configured so"</u> errors : 
ask model designer to enable the right fulltext indexes. <u>Workaround</u> : query on odisp:name.
<br/><br/>
&nbsp;&nbsp;- <u>No return from a fulltext search</u> : 
data can't be returned if it hasn't been saved since enabled for fulltext, so try saving some,
else ask data provider to do so, possibly in bulk.
<br/><br/>
&nbsp;&nbsp;- <u>Access Denied</u> : 
maybe you're trying to write from another project than this Resource's, or to write a frozen model 
(see its project's dcmp:frozenModelNames).
<br/><br/>
&nbsp;&nbsp;- <u>"Can't get Resource, more than one with same URI</u> 
[uri] (in projects [a, b seeing a]): has been forked implicitly, should also be forked explicitly" :
if this Resource shouldn't exist in project a, remove it from there. Otherwise, 
add its URI in b's dcmp:forkedUris. Then you will also be able to this Resource it from b 
if it should not be there, in which case don't forget to remove said URI from b's dcmp:forkedUris.
<br/><br/>
&nbsp;&nbsp;- <u>Requests made in your own code don't work</u>, though in the Playground they do : 
your code does not do everything it should.
Enable Firebug in Firefox and have a look in the "Console" tab at the actual request
that the Playground makes: URL, headers, body... and find out where your code's request differs.
<br/><br/>
&nbsp;&nbsp;- <u>Query on Resource links don't work</u>, though on primitive values they do : 
maybe you haven't encoded the Resource link's URI request parameter, as it should be per HTTP specs
(so since URIs already have some encoded part, they're actually double encoded).
It's actually a subset of the previous FAQ entry.
(Reported in <a href="https://github.com/ozwillo/ozwillo-datacore/issues/142">#142</a>)
<br/><br/>
&nbsp;&nbsp;- <u>"Version of data resource to update is required in PUT"</u> error : 
to update an existing data, you must PUT (rather than POST) it with the current version number 
(HTTP Entity Tag, used for optimistic locking to ensure data integrity).
And if you don't store said current version locally, you must first GET it from server.
You must also handle the case of the version being changed while your request is still reaching
the server, by a retrying it a few times.
<br/><br/>
&nbsp;&nbsp;- <u>How to debug Resource-level permissions</u> : 
Resource-level permissions are returned when querying as owner (or admin) in debug mode.
Therefore to check them in the Playground, go to the said Resource by entering ex.
<a href="/dc/type/poitour:Geoloc_0/32949" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">/dc/type/poitour:Geoloc_0/32949</a>
in the Playground URI address bar, then click on the colon (":") of the URI field (@id) 
to build a single result query such as
<a href="/dc/type/geoname:GeoDB_0?@id=http://data.ozwillo.com/dc/type/geoname:GeoDB_0/FR/2989417" class="dclink" onclick="
javascript:return findDataByType(encodeUri($(this).attr('href')));
">this one</a>
, then go in debug mode by clicking on the "?" button, 
and finally look in the results for the "ownedEntities" part (that only contains
data Resources that you have owner / admin rights on, for data security reasons) 
and within in the  "owners", "writers" and "readers" entity fields.
Note that Resource-level permissions can be updated from the Playground
using its bottom, Swagger part (operation
<a href="https://data.ozwillo-preprod.eu/dc-ui/index.html#!/r/replaceRightsOnResource_put_2">PUT /dc/r/...</a>).
<br/><br/>
&nbsp;&nbsp;- <a href="#metamodelFaq">Project & Model troubleshooting &amp; FAQ</a>
<br/><br/>
&nbsp;&nbsp;- <u>Wrong or inconsistent data</u> : 
see known cases in <a href="https://github.com/ozwillo/ozwillo-datacore/labels/data%20inconsistency">issues tagged "data inconsistency"</a> on github.
If not yet there, report it in <a href="https://github.com/ozwillo/ozwillo-datacore/issues/62">#62</a> for geo & org data
or as such a new issue tagged by "data inconsistency".
<br/><br/>
&nbsp;&nbsp;- <u>All reported FAQ cases</u> : 
see <a href="https://github.com/ozwillo/ozwillo-datacore/issues?utf8=%E2%9C%93&q=+label%3A%22FAQ%22">issues tagged "FAQ"</a> on github.
<br/><br/>


<br/>
<b>Adopting the Datacore:</b>
<br/><br/>
<b>To add your own data</b> using REST calls, you must first define or reuse the appropriate business-specific Models
<a href="#" title="- 1. provide a denormalized extract of your data, define Models for it, group related fields together in Mixins,
- 2. define their ID definition policy and link them using resource fields, define referencing mixin fields and default values,
- 3. find out which Models already exist and reconcile with them (or do it beforehands)">(?)</a>
.
You can do both using the <a href="./import/index.html">Import UI</a>
(see Master Model, empty template & samples there including OpenElec's, and
<a href="https://github.com/ozwillo/ozwillo-datacore/wiki/Playground-&-Import-UI-demo-scenario---Provto-&-OpenElec">its documentation on wiki</a>).
<br/>
However, if you prefer, you can do it using Java (see
<a href="https://github.com/ozwillo/ozwillo-datacore/tree/master/ozwillo-datacore-rest-server/src/main/java/org/ozwillo/datacore/sample">
Provto sample</a>), REST calls, or any other way that still follows the
<a href="https://github.com/ozwillo/ozwillo-datacore/blob/master/ozwillo-datacore-rest-server/src/main/java/org/ozwillo/datacore/sample/DatacoreSampleMethodologyBase.java">
methodology</a>.
<!--
In short, defining your models means :
provide a denormalized extract of your data, define Models for it, group related fields together in Mixins,
define their ID definition policy and link them using resource fields, define referencing mixin fields and default values,
find out which Models already exist and reconcile with them (or do it beforehands).
 -->
<br/><br/>
<b>To use data (existing or yours) from your own business application,</b> use the JSON/HTTP client of your own business application's platform
and / or of your choice to call the Datacore API server using REST JSON/HTTP calls. See
<a href="https://github.com/ozwillo/ozwillo-datacore/blob/master/README.md">README</a> for details on alternatives
: the Datacore CXF Java client, any other Java JAXRS-compatible client,
swagger.js in javascript, swagger codegen in any other language,
any bare HTTP client,
or supporting Ozwillo app frameworks if you've chosen to build your app on top of it
(<a href="https://github.com/ozwillo/ozwillo-java-spring-integration">oasis-spring-integration</a>,
<a href="https://github.com/ozwillo/ozwillo-node-client">ozwillo-node-client</a>).
<br/><br/>

<h1>API Details</h1>
<b>This endpoint</b> has for base URL <span class="dcConf_baseUrl_link">NOT INITED</span> 
(URL that must be called by clients using HTTP) 
and for container URL <span class="dcConf_containerUrl_link">NOT INITED</span> 
(URL that must be used to build Datacore Data resource URIs).
<br/><br/>

<br/>
<b>URIs</b> that uniquely identify Datacore Data resource are in the form
<span class="dcjsonline">$containerUrl/dc/type/$type/$id</span>, where 
$containerUrl is unique for a container (ex. http://data.ozwillo.com), $type is 
among available model types and $id is the resource's business ID (therefore
relative to tjee model type). Also note that <span class="dcjsonline">/dc/type/$type/$id</span>
is the Resource's Internal Resource Identifier (IRI). 
<br/><br/>
&nbsp;&nbsp;- IDs have 3 constraints : they must be valid URL endings, unique (not enforced yet), 
and if possible readable and representative of the resource.
<br/><br/>
&nbsp;&nbsp;- URIs must be <a href="http://perishablepress.com/stop-using-unsafe-characters-in-urls/">
valid URLs</a> meaning that all non safe characters (beyond <span class="dcjsonline">[0-9a-zA-Z]$-_.+!*'()</span>
including reserved characters <span class="dcjsonline">$&+,/:;=?@</span>
<a href="http://blog.lunatech.com/2009/02/03/what-every-web-developer-must-know-about-url-encoding">
outside of their purpose</a> such as '?' within <span class="dcjsonline">$type</span>)
must be URL-encoded, and it's bad practice for model names to contain some.<br/><br/>
&nbsp;&nbsp;- URIs of embedded Resources (as sub Resource within another top level Resource)
are by default <span class="dcjsonline">$containerUrl/dc/type/$subResourceType/$resourceId/$subResourceJsonPath</span>,
but can be something else if parsing is defined consistently within $subResourceType.
<br/><br/>

<br/>
<b>Values</b> are formatted in JSON as follows :
<br/><br/>
&nbsp;&nbsp;- <span class="dcjsonline">date</span> as <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO8601</a>
such as <span class="dcjsonline">"2014-01-08T09:31:19.062Z"</span>, <span class="dcjsonline">"2014-01-08T10:31:19.062+01:00"</span>.
Put your (data or application) timezone in your dates so that they can be shared across the world while staying readable for your local use case.
<br/><br/>
&nbsp;&nbsp;- <span class="dcjsonline">long</span> and <span class="dcjsonline">double</span> as string
<br/><br/>
&nbsp;&nbsp;- <span class="dcjsonline">i18n</span> as a list of translation objects (like JSONLD), for instance :
<span class="dcjsonline">[{"v": "Torino", "l": "it"}, {"v": "Turin","l": "fr"}]</span>.
It allows language-agnostic lookups such as 
<a href="/dc/type/pli:city_0?pli:name_i18n=Torino" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">/dc/type/pli:city_0?pli:name_i18n=Torino</a>
(or using the exact field path  
<a href="/dc/type/pli:city_0?pli:name_i18n.v=Torino" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">/dc/type/pli:city_0?pli:name_i18n.v=Torino</a>
) so that values are useful even if not untranslated and therefore are
not siloed in their language, but also language-scoped lookups such as 
<a href="/dc/type/pli:city_0?pli:name_i18n.it=Torino" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">/dc/type/pli:city_0?pli:name_i18n.it=Torino</a>
(or using the exact field path through $elemMatch  
<a href="#" class="dclink" onclick="
javascript:return findDataByType($(this).text());
">/dc/type/pli:city_0?pli:name_i18n=$elemMatch{"v":"Torino","l":"it"}</a>
). Moreover, language can also be specified once for the whole query in a l or @language parameter such as in
 <a href="/dc/type/pli:city_0?pli:name_i18n=Torino" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">/dc/type/pli:city_0?pli:name_i18n=Torino&l=it</a>
. Beyond such exact lookups, all string operators can be used, and most usefully $fulltext
(must be explicitly enabled on the field) and $regex.
<br/><br/>
<b>Advanced field features</b> are documented in the Models' import wiki and templates,
all linked from their <a href="./import/index.html">Import UI</a>. Here's a quick list :
required, defaultValue, queryLimit, aliasedStorageNames, readonly ;
string & i18n : fulltext ; i18n : defaultLanguage ; resource : resourceType ;
list : listElementField, isSet, keyFieldName ; map : mapFields.
<br/><br/>

<br/>
<b>Operations</b> are specified in details below within the Swagger UI playground, and especially :
<br/><br/>
&nbsp;&nbsp;- <a href="#!/dc/postAllDataInType_post_0" target="_blank">"postAllDataInType" for typed updates</a> (version) and
<br/><br/>
&nbsp;&nbsp;- <a href="#!/dc/findDataInType_get_2" target="_blank">"findDataInType" for typed queries</a> 
(criteria including $fulltext, sort, ranged query- or iterator-based pagination, debug mode, view).
<br/><br/>
Note that typed operations where type of data is provided in URL are usually more efficient : 
'*inType' methods are faster, finder queries with type even more.
<br/><br/>

<br/>
<strong>Authentication:</strong>
<br/>&nbsp;&nbsp;- In production (and integration), Ozwillo Kernel OAuth2 authentication must be used, i.e. 
<a href="https://github.com/ozwillo/ozwillo-datacore/wiki/How-to-use-OAuth2-with-Datacore">
HTTP requests' Authorization header must be "Bearer &lt;valid OAuth2 Bearer 
/ Access Token&gt;"</a> (see <a href="https://github.com/ozwillo/ozwillo-datacore/wiki/How-to-authenticate-to-kernel-oauth2">how to get one</a>).
This implies that you must first register your application with the Kernel (see <a href="http://doc.ozwillo.com">documentation</a>).
<br/>&nbsp;&nbsp;- In dev mode, there is a mock authentication system that supports Basic Auth 
(i.e. HTTP requests' Authorization header must be "Basic &lt;base 64-encoding of username:password&gt;"), 
for a few users without password, see available ones in 
<a href="https://github.com/ozwillo/ozwillo-datacore/blob/master/ozwillo-datacore-rest-server/src/main/resources/ozwillo-datacore-security-mock-context.xml">
configuration</a>.
<br/>&nbsp;&nbsp;- Datacore API's Swagger UI allows to provide said Authorization header, 
with a default value that logs as admin in dev mode.
<br/><br/>

<a id="exploreMetamodel"></a>
<h1>Explore available models and projects</h1>
A <b>project</b> is a business-consistent set of models and their resources, and can see
those of its visible projects (its dependencies). All interactions occur within the context of
the current project, but some may be prevented : for instance, it usually forbidden to write models
in another project than the current one. A project can have forked URIs i.e. that cannot be
seen in visible projects, which mostly allows to <b>fork models</b> i.e. redefine / override
its own version of a model. 
<br/><br/>
To <b>start exploring available models</b>, select your chosen project (i.e. the point of view
that you wish to explore from, ex. <span class="dcjsonline">geo_1</span> for geographical
jurisdictions such as countries and cities) or merely the default <span class="dcjsonline">oasis.main</span>
project in the dropdown above the Playground UI. This will display in the Playground
result output its project portal, i.e. the <b>list of storage models</b> (ex. in <span class="dcjsonline">geo_1</span>
<a href="/dc/type/dcmo:model_0/geo:Area_0" class="dclink" onclick="
javascript:return getData($(this).attr('href'));
">geo:Area_0</a>
) and for each of them a link to models they store (ex.
<a href="/dc/type/dcmo:model_0?dcmo:storageModel=geo:Area_0" class="dclink" onclick="
javascript:return findData($(this).attr('href'), null, null, null, 25, {'X-Datacore-View':' '});
">models stored in geo:Area_0</a>
), and the list of <b>pure mixins</b> (not mandatorily stored in a single storage model)
and for each of them a link to models that use them as mixins, that are local to the
selected project. Note that this is why there are none in the <span class="dcjsonline">geo</span>
project, which makes resources and models of <span class="dcjsonline">geo_1</span> visible
but doesn't have any of its own.
<br/><br/>
Further, <b>querying models as Resources</b> allows to know in which Model type(s) a given kind
of Resources can be queried, for instance :
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <a href="/dc/type/dcmo:model_0?dcmo:globalMixins=pl:place_0" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">dcmo:globalMixins=pl:place_0</a> : lists Models that describe a location i.e. have a pl:shape WKS point, 
such as : 
<a href="/dc/type/dcmo:model_0/co:company_0" class="dclink" onclick="
javascript:return getData($(this).attr('href'));
">co:company_0</a>, 
whose WKS can then be retrieved, for instance by 
GET <a href="/dc/type/co:company_0" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">/dc/type/co:company_0</a> .
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <a href="/dc/type/dcmo:model_0?dcmo:globalFields.dcmf:name=plo:name" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">dcmo:globalFields.dcmf:name=plo:name</a> : lists Models that "officially" have a country 
(i.e. having the "official" field for a country in Ozwillo Datacore), and that can therefore be queried on that, 
such as : 
<a href="/dc/type/dcmo:model_0/plo:country_0" class="dclink" onclick="
javascript:return getData($(this).attr('href'));
">plo:country_0</a>, 
<a href="/dc/type/dcmo:model_0/pli:city_0" class="dclink" onclick="
javascript:return getData($(this).attr('href'));
">pli:city_0</a>, 
<a href="/dc/type/dcmo:model_0/co:company_0" class="dclink" onclick="
javascript:return getData($(this).attr('href'));
">co:company_0</a>, 
<a href="/dc/type/dcmo:model_0/cityareauseit:urbanAreaDestinationOfUse_0" class="dclink" onclick="
javascript:return getData($(this).attr('href'));
">cityareauseit:urbanAreaDestinationOfUse_0</a>, 
<a href="/dc/type/dcmo:model_0/cityarea:cityArea_0" class="dclink" onclick="
javascript:return getData($(this).attr('href'));
">cityarea:cityArea_0</a> , 
which can then be queried by country, for instance by 
GET <a href="/dc/type/plo:country_0" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">/dc/type/plo:country_0</a>, 
GET <a href="/dc/type/pli:city_0" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">/dc/type/pli:city_0</a>, 
GET <a href="/dc/type/co:company_0" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">/dc/type/co:company_0</a>, 
GET <a href="/dc/type/cityareauseit:urbanAreaDestinationOfUse_0" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">/dc/type/cityareauseit:urbanAreaDestinationOfUse_0</a> 
and GET <a href="/dc/type/cityarea:cityArea_0" class="dclink" onclick="
javascript:return findDataByType($(this).attr('href'));
">/dc/type/cityarea:cityArea_0</a>.
<br/><br/>
<b>Here are the generic projects :</b>
<br/>
&nbsp;&nbsp;- <span class="dcjsonline">oasis.main</span> is the default project
and shows all current stable versions of projects of public interest,
<br/>
&nbsp;&nbsp;- <span class="dcjsonline">oasis.meta</span>
contains the metamodel and is visible by all other projects,
<br/>
&nbsp;&nbsp;- <span class="dcjsonline">oasis.sample</span>
contains unit test technical samples,
<br/>
&nbsp;&nbsp;- <span class="dcjsonline">oasis.sandbox</span> can be used by
anyone to test the Datacore with its own models and resources, especially in the Import UI.
<br/><br/>
<b>Here are some of the most often reused projects :</b>
<br/>
&nbsp;&nbsp;- <span class="dcjsonline">geo_1</span> (major version 1)
contains all geographical jurisdictions (such as countries and cities), while <span class="dcjsonline">geo</span>
makes its current stable version visible whatever its number,
<br/>
&nbsp;&nbsp;- <span class="dcjsonline">org_1</span> (major version 1)
contains all public and private organizations as well as persons and also sees <span class="dcjsonline">geo_1</span>,
while <span class="dcjsonline">org</span> makes its current stable version visible whatever its number.
<br/><br/>
<b>Here are more project-level features :</b>
<br/>
&nbsp;&nbsp;- <span class="dcjsonline">dcmp:securityConstraints</span> :
if any, checked firsthand whatever the resource.   
<br/>
&nbsp;&nbsp;- <span class="dcjsonline">dcmp:securityDefaults</span> :
used when !modelLevelSecurityEnabled or no security found in model hierarchy ; null means global
defaults (depends on devmode) ; in case of multi-project storage models (such as dcmi:mixin_0
i.e. the metamodel), is directly used instead of model-level security which makes no sense
(because without that, models of any project would only be editable by oasis.meta writers).
<br/>
&nbsp;&nbsp;- <span class="dcjsonline">dcmp:modelLevelSecurityEnabled</span> :
allows different security levels in models/mixins (even in same resource),
with permissions that are defined at Resource-level allowing the most rights
(ex. owner on orgpr:PrivateOrganization_0 fields), and other permissions being allowed
by model-level security (ex. reader on org:Organization_0 fields).
Defaults to false.
<br/>
&nbsp;&nbsp;- <span class="dcjsonline">dcmp:useModelSecurity</span> :
use model security instead of project security as default security ;
if disabled, model security has not to be defined and is replaced by project securityDefaults
(even and especially if modelLevelSecurityEnabled !) and is the same across all models of this project.
<br/>
&nbsp;&nbsp;- <span class="dcjsonline">dcmp:visibleSecurityConstraints</span> : allows generic conf
&amp; constraints on the project to visible project relation without having to manage &amp; store a
visibleProjectRelation object ; is checked firsthand if any WHATEVER THE RESOURCE (null dataEntity)
when checking rights in a model from another current project. Typically used to prevent from writing
from a project in one of its dependency project's models.
<br/>
&nbsp;&nbsp;- <span class="dcjsonline">dcmp:forkedUris</span> : add a model URI there to allow to
fork it i.e. to import it in this project even if it is already in one of its visible projects.
This also works with any data resource outside (meta) models, but it shouldn't be abused.
In details, resources listed here are handled as if, only for them, their project did not
inherit / have any other project visible.
<br/>
&nbsp;&nbsp;- <span class="dcjsonline">dcmp:frozenModelNames</span> : allows to freeze (forbid change on)
some of this project's models or all of them using the '*' wildcard, once they are stable and in order
to be able to use them (create resources in them) without risking these becoming obsolete at some point.
<br/>
&nbsp;&nbsp;- <span class="dcjsonline">dcmp:allowedModelPrefixes</span> : if any, only models whose
name starts by any one of those prefixes ('*' wildcard also allowed, to ease switching it on and off)
can be changed in this project, in order to avoid to add models that belong to another project by
mistake, such as POSTing an org model while importing geo elements using the master model file.
<br/><br/>

<a id="metamodelFaq"></a>
<b>Project &amp; Model troubleshooting &amp; FAQ :</b>
<br/>
&nbsp;&nbsp;- <span class="dcjsonline">model failed to load :</span>
the Model is persisted as a Resource alright (its .../dcmo:model_0/modelName URI works)
but getting its Resources fails with a ModelNotFoundException. This means that the Model
can't be loaded from its Resource representation. To solve it, try to rePOST the Model's
Resource representation (ex. using edit / POST or import playground features), which will
trigger Model reload, and if it fails try to patch it according to the error message.
<br/>
&nbsp;&nbsp;- <span class="dcjsonline">can't write Resource ("access denied") :</span>
check that you have the rights to, and (using ex. the edit / POST playground feaure)
that its Model is not among its Project's dcmp:frozenModelNames or dcmp:allowedModelPrefixes
(see above).
<br/>
&nbsp;&nbsp;- <span class="dcjsonline">"Bad URI syntax: Illegal character in path at index n" (last index of the model URI) :</span>
check that the mixin name is not written in the "Mixin" column with an (illegal) invisible character such as a space at the end.
<br/><br/>

<a id="playgroundUserManual"></a>
<h1>Playground User Manual</h1>
(See also <a href="https://github.com/ozwillo/ozwillo-datacore/wiki/Playground-&-Import-UI-demo-scenario---Provto-&-OpenElec">its tutorial on wiki</a>.)
<br/><br/>
&nbsp;&nbsp;- <b>click on a URI's id</b> to go to the Resource it is the URI of.
<br/><br/>
&nbsp;&nbsp;- <b>click on <span class="dcjsonline">type</span> in a URI
or on an item of the <span class="dcjsonline">@type</span> list</b>
to go to the corresponding model definition.
<br/><br/>
&nbsp;&nbsp;- <b>click on a property name</b> to similarly go to the model that defines it.
<br/><br/>
&nbsp;&nbsp;- <b>click on <span class="dcjsonline">:</span></b> between a property's key and value to query
all other resources with the same value for this property in the same model type. Note that the Playground
shows said key and value UNencoded in order to make it easier to enter text in the language of the user,
but that developers should URI-encode them nonetheless, as Playground actually does (see its HTTP queries
in a debugger such as Firebug). 
<br/><br/>
&nbsp;&nbsp;- <b>click on <span class="dcjsonline">/</span></b> between a URI's model type and id to look for
resources that refer (link) to it : if it's a metamodel it queries its resources,
otherwise it lists all models that define a <span class="dcjsonline">resource</span>
field that links to it through its model type at top level or in a top level
<span class="dcjsonline">list</span> field, and provides links allowing to do
the same at further depth below top level and for other mixins besides its model type.
<br/><br/>
&nbsp;&nbsp;- <b>project portal</b> : select another project in the dropdown above the Playground
(see details on <a href="#exploreMetamodel">how to explore its available (meta)models</a>).
<br/><br/>
&nbsp;&nbsp;- <b>query line</b> : write there the relative URI of a single Resource
or of a LDP-like Datacore query (see documentation below in Swagger UI of operation <a href="#!/dc/findDataInType_get_2" target="_blank">
<span class="dcjsonline">findDataInType</span> for typed queries</a> (criteria, sort, ranged query- or iterator-based pagination).
<br/><br/>
&nbsp;&nbsp;- <b>buttons</b> : roll your mouse over them to see what they do.
<br/><br/>

<h1>This server's configuration</h1>
<pre><code>
## Development mode (also allows to set system property datacore.dropdb=true ex. in maven)
datacore.devmode=<span class="dcConf_devmode">NOT INITED</span>

## Shard Endpoint - full URL (for clients...)
datacoreApiServer.baseUrl=<span class="dcConf_baseUrl">NOT INITED</span>

## Container - default URL (for URIs...)
datacoreApiServer.containerUrl=<span class="dcConf_containerUrl">NOT INITED</span>

## Other (or all) known Datacores (comma-separated container URLs)
datacoreApiServer.knownDatacoreContainerUrls=<span class="dcConf_knownDatacoreContainerUrls">NOT INITED</span>

## Query :
## default maximum number of documents to scan when fulfilling a query, overriden by
## DCFields', themselves limited by DCModel's. 0 means no limit (for tests), else ex.
## 1000 (secure default), 100000 (on query-only nodes using secondary & timeout)... 
## http://docs.mongodb.org/manual/reference/operator/meta/maxScan/
datacoreApiServer.query.maxScan=<span class="dcConf_queryMaxScan">NOT INITED</span>
## default maximum start position
datacoreApiServer.query.maxStart=<span class="dcConf_queryMaxStart">NOT INITED</span>
## default maximum number of documents returned
datacoreApiServer.query.maxLimit=<span class="dcConf_queryMaxLimit">NOT INITED</span>
## default number of documents returned
datacoreApiServer.query.defaultLimit=<span class="dcConf_queryDefaultLimit">NOT INITED</span>

## Kernel Configuration
kernel.baseUrl=<span class="dcConf_kernelBaseUrl">NOT INITED</span>
</code></pre>
<br/><br/>

<a id="swagger"></a>